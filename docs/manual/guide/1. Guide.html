<html>
    <head>
        <meta http-equiv="Content-type" content="text/html; charset=utf-8"/>
        <title>1. Guide</title>
        <link rel="stylesheet" href="../css/main.css" type="text/css" media="screen" title="Ref" charset="utf-8"/>
    </head>
    <body class="body">
    <h1><a name="1. Guide">1. Guide</a></h1><h2>Introduction</h2>
A common requirement in many applications is to deal with countries and/or continents. The plugin's goal is to apply the DRY principle to these requirements.<p class="paragraph"/>In short, the plugin offers:
<ul class="star">
<li>populated domain classes for countries and continents</li>
<li>i18n for continent and country names (for now, only en and de locales)</li>
<li>tags for simple usage of</li>
<ul class="star">
<li>localized names</li>
<li>select boxes: for all countries, for all continents, for all countries of a continent or for a defined set of countries. The select box contents are automatically sorted by the the localized country/continent name.</li>
</ul></ul><p class="paragraph"/>In future this plugin will be extended, some ideas are
<ul class="star">
<li>provide a IP address -&#62; country conversion</li>
<li>add more languages</li>
<li>provide templates for scaffolding</li>
</ul><p class="paragraph"/>The plugin is licensend under the <a href="http://sam.zoy.org/wtfpl/" target="blank">WTFPL</a>.<p class="paragraph"/><h2>Installation</h2><p class="paragraph"/>Installation is done like every other plugin:
<div class="code"><pre>grails install&#45;plugin countries</pre></div><p class="paragraph"/>When starting up the application, the Country and Continent domain classes are populated during the bootstrapping process. The list of available countries is loaded from web-app/WEB-INF/countries.csv. If your application needs only a subset of the complete list, copy countries.csv to your app's web-app/WEB-INF and remove countries out of scope.<p class="paragraph"/><h2>Domain classes</h2>
The plugin contains two domain classes <code>grails.plugin.countries.Country</code> and <code>grails.plugin.countries.Continent</code>. The are related to each other with a bidirectional 1:n relation, so each continent has multiple countries and each country refers to one continent. The Country domain class holds the 2- and 3 letter codes of ISO 3166 as well as the name of country's capital. N.B. the country name itself is not stored in the domain class but is available in i18n properties files by following the convention <code>country.&#60;3 letter code&#62;</code>. So when e.g. lookup up localized names for Germany, you have to use property <code>country.GER</code>. The same applies for continents. Since there seems no standard abbreviation for continents the plugin uses:
<ul class="star">
<li>AF: Afrika</li>
<li>AS: Asia</li>
<li>OC: Australia</li>
<li>EU: Europe</li>
<li>NA: North America</li>
<li>SA: South America</li>
<li>AN: Antarctica</li>
</ul><p class="paragraph"/>The domainclasses are populated during Grails' bootstrap process, so we have 246 countries for now.
<blockquote class="warning">
The author cannot assure that the country data is 100% accurate. If a country is missing in the list, or any errors are found, please file a JIRA.
</blockquote><p class="paragraph"/><h2>TagLib</h2>
The plugin comes with a taglib providing easy access to localized filenames and for country/continent related select boxes. For details, see the tag description in the left hand frame.<p class="paragraph"/><h2>Example</h2>
This short example demonstrates the usage and the capabilities of the plugin. It is assumed that you have created some grails project. A domain class <code>Address</code> uses <code>Country</code> :
<div class="code"><pre>import grails.plugins.countries.Country<p class="paragraph"/>class Address &#123;
	String street
	String no
	String zip
	String city
	String state
	Country country
&#125;</pre></div><p class="paragraph"/>Assume a gsp used for creating address labels, the controller exposes a <code>Address</code> instance using <code>address</code>:<p class="paragraph"/><div class="code"><pre>Placeholder <span class="java&#45;keyword">for</span> name
$&#123;address.street&#125; $&#123;address.no&#125;
$&#123;address.zip&#125; $&#123;address.city&#125; $&#123;address.state&#125;<p class="paragraph"/>&#60;country:name object=<span class="java&#45;quote">"$&#123;address.country&#125;"</span>/&#62;</pre></div><p class="paragraph"/>During data entry, a select box should be used. The box should display each available country:<p class="paragraph"/><div class="code"><pre>&#8230;
&#60;country:select name=<span class="java&#45;quote">"country.id"</span> value=<span class="java&#45;quote">"$&#123;fieldValue(bean:address,field:'country.id')&#125;"</span> noSelection=<span class="java&#45;quote">"&#91;'':'select please:'&#93;"</span>/&#62;
...</pre></div><p class="paragraph"/><h2>release history</h2>
<ul class="star">
<li>0.2 2010-08-07:</li>
<ul class="star">
<li>added languages:</li>
<ul class="star">
<li>af: contributed by Robert Fletcher</li>
<li>es, fr, it, pt_BR: contributed by Lucas Frare Teixeira</li>
</ul>
<li>country list is now maintained out CountryBootstrap.groovy in a seperate csv file</li>
<li>reworked properties file to consistently use ISO-3166 3-letter-code as key</li>
</ul>
<li>0.1.1 2010-08-04: bugfix: plugin unusable with Grails &#60;= 1.3.3</li>
<li>0.1 2010-08-04: initial release</li>
</ul><p class="paragraph"/>
    </body>
</html>
